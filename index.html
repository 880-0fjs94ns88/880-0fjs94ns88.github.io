<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>errorrail.dev test</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            /* Keep cursor none for default browser cursor throughout */
            cursor: none !important; 
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            overflow: hidden;
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
        }

        .desktop {
            width: 100vw;
            height: 100vh;
            position: relative;
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
        }

        .taskbar {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            height: 48px;
            background: rgba(0, 0, 0, 0.8);
            backdrop-filter: blur(20px);
            display: flex;
            align-items: center;
            padding: 0 12px;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            z-index: 1002; /* Ensure taskbar stays on top */
        }

        .start-button {
            width: 36px;
            height: 36px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 2px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 8px;
            transition: all 0.2s ease;
        }

        .start-button:hover {
            background: rgba(255, 255, 255, 0.2);
        }

        .start-icon {
            width: 20px;
            height: 20px;
            background: linear-gradient(45deg, #0078d4, #00bcf2);
            clip-path: polygon(0 0, 48% 0, 48% 48%, 100% 48%, 100% 100%, 0 100%);
        }

        .taskbar-apps {
            display: flex;
            gap: 4px;
            margin-left: 8px;
        }

        .taskbar-app {
            width: 36px;
            height: 36px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 2px;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.2s ease;
        }

        .taskbar-app:hover {
            background: rgba(255, 255, 255, 0.1);
        }

        .desktop-icons {
            position: absolute;
            top: 20px;
            left: 20px;
            display: grid;
            grid-gap: 20px;
            grid-template-columns: repeat(auto-fit, 80px);
        }

        .desktop-icon {
            display: flex;
            flex-direction: column;
            align-items: center;
            text-align: center;
            cursor: pointer;
            padding: 8px;
            border-radius: 4px;
            transition: all 0.3s ease;
            opacity: 0;
            transform: translateY(20px);
            animation: iconFadeIn 0.6s ease forwards;
        }

        .desktop-icon:nth-child(1) { animation-delay: 0.1s; }
        .desktop-icon:nth-child(2) { animation-delay: 0.2s; }
        .desktop-icon:nth-child(3) { animation-delay: 0.3s; }

        @keyframes iconFadeIn {
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .desktop-icon:hover {
            background: rgba(255, 255, 255, 0.1);
            transform: scale(1.05);
        }

        .desktop-icon.clicked {
            animation: iconClick 0.3s ease;
        }

        @keyframes iconClick {
            0% { transform: scale(1); }
            50% { transform: scale(0.95); background: rgba(0, 120, 212, 0.3); }
            100% { transform: scale(1); }
        }

        .icon-image {
            width: 48px;
            height: 48px;
            margin-bottom: 8px;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            color: white;
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
        }

        .html-icon {
            background: linear-gradient(135deg, #e34c26, #f06529);
            position: relative;
        }

        .html-icon::before {
            content: '</>';
            font-family: 'Courier New', monospace;
            font-weight: bold;
            font-size: 20px;
        }

        .recycle-icon {
            background: linear-gradient(135deg, #4CAF50, #66BB6A);
        }

        .folder-icon {
            background: linear-gradient(135deg, #FFC107, #FFD54F);
        }

        .icon-label {
            color: white;
            font-size: 12px;
            text-shadow: 0 1px 3px rgba(0, 0, 0, 0.8);
            max-width: 80px;
            word-break: break-word;
        }

        .custom-cursor {
            position: fixed;
            width: 20px;
            height: 20px;
            pointer-events: none;
            z-index: 10000;
            transition: all 0.1s ease;
        }

        .cursor-arrow {
            width: 0;
            height: 0;
            border-left: 10px solid white;
            border-right: 6px solid transparent;
            border-top: 6px solid transparent;
            border-bottom: 10px solid transparent;
            filter: drop-shadow(1px 1px 2px rgba(0, 0, 0, 0.5));
        }

        .time-display {
            position: absolute;
            right: 12px;
            color: white;
            font-size: 13px;
            display: flex;
            flex-direction: column;
            align-items: flex-end;
            text-align: center;
        }

        .notification-area {
            display: flex;
            align-items: center;
            gap: 8px;
            margin-right: 12px;
            color: white;
        }

        .system-icon {
            width: 16px;
            height: 16px;
            opacity: 0.8;
            cursor: pointer;
        }

        .loading-screen {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: #0078d4;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            z-index: 1000;
            animation: fadeOutLoading 2s ease 1s forwards;
        }

        @keyframes fadeOutLoading {
            to {
                opacity: 0;
                visibility: hidden;
            }
        }

        /* Updated Windows Logo Styling */
        .windows-logo {
            width: 80px;
            height: 80px;
            margin-bottom: 30px;
            display: flex;
            flex-wrap: wrap; /* Allows panes to wrap into a 2x2 grid */
            animation: none; /* Remove old spin animation */
        }

        .windows-logo .pane {
            width: 50%; /* Each pane takes half the width */
            height: 50%; /* Each pane takes half the height */
            background: #0078D4; /* Standard Windows blue */
            box-shadow: 0 0 5px rgba(0, 0, 0, 0.2); /* Subtle shadow for depth */
            position: relative;
            box-sizing: border-box; /* Include padding/border in dimensions */
            animation: winLogoPulse 2s infinite ease-in-out;
        }

        /* Add individual delays for a staggered pulse effect */
        .windows-logo .p1 { animation-delay: 0s; }
        .windows-logo .p2 { animation-delay: 0.1s; }
        .windows-logo .p3 { animation-delay: 0.2s; }
        .windows-logo .p4 { animation-delay: 0.3s; }

        @keyframes winLogoPulse {
            0%, 100% {
                transform: scale(1);
                box-shadow: 0 0 5px rgba(0, 0, 0, 0.2);
            }
            50% {
                transform: scale(1.05); /* Slight scale up */
                box-shadow: 0 0 15px rgba(0, 0, 0, 0.4); /* More pronounced shadow */
            }
        }

        .loading-text {
            color: white;
            font-size: 24px;
            margin-bottom: 20px;
        }

        .loading-dots {
            display: flex;
            gap: 4px;
        }

        .loading-dot {
            width: 8px;
            height: 8px;
            background: white;
            border-radius: 50%;
            animation: dotPulse 1.4s ease-in-out infinite both;
        }

        .loading-dot:nth-child(1) { animation-delay: -0.32s; }
        .loading-dot:nth-child(2) { animation-delay: -0.16s; }

        @keyframes dotPulse {
            0%, 80%, 100% { transform: scale(0.8); opacity: 0.5; }
            40% { transform: scale(1); opacity: 1; }
        }

        .window {
            position: fixed;
            background: #f0f0f0;
            border: 1px solid #d4d4d4;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.15);
            z-index: 1001;
            opacity: 0;
            transform: scale(0.8) translateY(20px);
            transition: all 0.3s cubic-bezier(0.25, 0.46, 0.45, 0.94);
            border-radius: 8px;
            overflow: hidden;
            transform-origin: center center;
        }

        .window.show {
            opacity: 1;
            transform: scale(1) translateY(0);
        }

        /* The maximizing animation class */
        .window.is-maximizing {
            transition: top 0.3s cubic-bezier(0.25, 0.46, 0.45, 0.94),
                        left 0.3s cubic-bezier(0.25, 0.46, 0.45, 0.94),
                        width 0.3s cubic-bezier(0.25, 0.46, 0.45, 0.94),
                        height 0.3s cubic-bezier(0.25, 0.46, 0.45, 0.94),
                        border-radius 0.3s cubic-bezier(0.25, 0.46, 0.45, 0.94);
            border-radius: 0; /* Ensures the final state has no border-radius */
            top: 0 !important;
            left: 0 !important;
            width: 100vw !important;
            height: calc(100vh - 48px) !important;
        }
        
        /* Class to mark the window as maximized (for logical state) */
        .window.maximized {
            border-radius: 0 !important;
            top: 0 !important;
            left: 0 !important;
            width: 100vw !important;
            height: calc(100vh - 48px) !important;
        }


        .window-header {
            height: 30px;
            background: linear-gradient(to bottom, #ffffff, #f0f0f0);
            border-bottom: 1px solid #d4d4d4;
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 0 8px;
            -webkit-app-region: drag; /* Make header draggable */
        }

        .window-title {
            font-size: 11px;
            color: #333;
            display: flex;
            align-items: center;
            gap: 6px;
            font-weight: normal;
        }

        .window-title-icon {
            width: 16px;
            height: 16px;
            background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><rect width="16" height="16" fill="%23ffffff"/><path d="M2 2h12v12H2z" fill="none" stroke="%23000" stroke-width="0.5"/><text x="8" y="10" text-anchor="middle" font-family="Consolas,monospace" font-size="6" fill="%23333">txt</text></svg>') no-repeat center;
        }

        .window-controls {
            display: flex;
        }

        .window-control {
            width: 45px; /* Wider for easier targeting */
            height: 30px; /* Taller for easier targeting */
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 9px;
            color: #333;
            background: #f0f0f0;
            cursor: pointer;
            font-family: 'Marlett', sans-serif;
            transition: background 0.1s ease;
        }

        .window-control:hover {
            background: #e5f1fb;
        }

        .window-control:active {
            background: #cce4f7;
        }
        .window-control.close:hover {
            background-color: #e81123;
            color: white;
        }

        .window-control.close:active {
            background-color: #f1707a;
            color: white;
        }

        .window-control.minimize::before { content: '0'; }
        .window-control.maximize::before { content: '1'; }
        .window-control.close::before { content: 'r'; }

        .window-content {
            height: calc(100% - 30px); /* Adjust for header height */
            background: white;
            position: relative;
        }

        .window-menu {
            height: 22px;
            background: #f0f0f0;
            border-bottom: 1px solid #d4d4d4;
            display: flex;
            align-items: center;
            padding: 0 8px;
            font-size: 11px;
        }

        .menu-item {
            padding: 2px 8px;
            color: #333;
            cursor: pointer;
        }

        .menu-item:hover {
            background: #e5f1fb;
        }

        .window iframe {
            width: 100%;
            height: calc(100% - 22px); /* Adjust for menu height */
            border: none;
            background: white;
        }

        .window-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            z-index: 1000;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
        }

        .window-overlay.show {
            opacity: 1;
            visibility: visible;
        }

        .fade-to-white {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: white;
            z-index: 2000;
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.5s ease;
        }

        .fade-to-white.show {
            opacity: 1;
            visibility: visible;
        }
    </style>
</head>
<body>
    <div class="loading-screen">
        <!-- Updated Windows Logo HTML Structure -->
        <div class="windows-logo">
            <span class="pane p1"></span>
            <span class="pane p2"></span>
            <span class="pane p3"></span>
            <span class="pane p4"></span>
        </div>
        <div class="loading-text">Windows</div>
        <div class="loading-dots">
            <div class="loading-dot"></div>
            <div class="loading-dot"></div>
            <div class="loading-dot"></div>
        </div>
    </div>

    <div class="desktop">
        <div class="desktop-icons">
            <div class="desktop-icon" id="mainpage-icon">
                <div class="icon-image html-icon"></div>
                <div class="icon-label">mainpage</div>
            </div>
        </div>

        <div class="taskbar">
            <div class="start-button">
                <div class="start-icon"></div>
            </div>
            <div class="taskbar-apps">
                <div class="taskbar-app">📁</div>
                <div class="taskbar-app">🌐</div>
                <div class="taskbar-app">⚙️</div>
            </div>
            <div class="notification-area">
                <div class="system-icon">🔊</div>
                <div class="system-icon">📶</div>
                <div class="system-icon">🔋</div>
            </div>
            <div class="time-display">
                <div id="time">12:34 PM</div>
                <div id="date">6/5/2025</div>
            </div>
        </div>
    </div>

    <div class="custom-cursor">
        <div class="cursor-arrow"></div>
    </div>

    <div class="window-overlay" id="window-overlay">
        <div class="window" id="mainpage-window" style="width: 85%; height: 75%; top: 12%; left: 7.5%;">
            <div class="window-header">
                <div class="window-title">
                    <div class="window-title-icon"></div>
                    haiii x3
                </div>
                <div class="window-controls">
                    <div class="window-control minimize"></div>
                    <div class="window-control maximize" id="maximize-button"></div>
                    <div class="window-control close" onclick="closeWindow()"></div>
                </div>
            </div>
            <div class="window-menu">
                <div class="menu-item">File</div>
                <div class="menu-item">Edit</div>
                <div class="menu-item">Format</div>
                <div class="menu-item">View</div>
                <div class="menu-item">Help</div>
            </div>
            <div class="window-content">
                <!-- Reverted iframe source to load from demo/mainpage.html -->
                <iframe id="mainpage-iframe" src="mainpage.html"></iframe>
            </div>
        </div>
    </div>

    <div class="fade-to-white" id="fade-overlay"></div>

    <script>
        // Update time display
        function updateTime() {
            const now = new Date();
            const timeStr = now.toLocaleTimeString([], {hour: '2-digit', minute:'2-digit'});
            const dateStr = now.toLocaleDateString();
            document.getElementById('time').textContent = timeStr;
            document.getElementById('date').textContent = dateStr;
        }
        
        setInterval(updateTime, 1000);
        updateTime();

        // Custom cursor - INDEPENDENT of real mouse movement initially
        const cursor = document.querySelector('.custom-cursor');
        let cursorX = 0, cursorY = 0;
        let isCustomCursorInteractive = false; // New flag to control interactivity

        function animateCursor() {
            cursor.style.left = cursorX + 'px';
            cursor.style.top = cursorY + 'px';
            requestAnimationFrame(animateCursor);
        }
        animateCursor();

        // Listen for real mouse movements ONLY when isCustomCursorInteractive is true
        // This listener is for the main document body and captures events outside the iframe.
        document.addEventListener('mousemove', (e) => {
            if (isCustomCursorInteractive) {
                cursorX = e.clientX;
                cursorY = e.clientY;
            }
        });


        // Automated mouse movement and click animation
        function startMouseAnimation() {
            const mainpageIcon = document.getElementById('mainpage-icon');
            const iconRect = mainpageIcon.getBoundingClientRect();
            const targetX = iconRect.left + iconRect.width / 2;
            const targetY = iconRect.top + iconRect.height / 2;

            // Start from bottom right corner
            let startX = window.innerWidth - 50;
            let startY = window.innerHeight - 100;
            
            cursorX = startX;
            cursorY = startY;

            // Animate mouse movement to the icon
            const duration = 2000; // 2 seconds
            const startTime = Date.now();

            function moveMouseToIcon() {
                const elapsed = Date.now() - startTime;
                const progress = Math.min(elapsed / duration, 1);
                
                // Easing function for smooth movement
                const easeProgress = 1 - Math.pow(1 - progress, 3);
                
                cursorX = startX + (targetX - startX) * easeProgress;
                cursorY = startY + (targetY - startY) * easeProgress;

                if (progress < 1) {
                    requestAnimationFrame(moveMouseToIcon);
                } else {
                    // Mouse reached the icon, now click it
                    setTimeout(() => {
                        clickIcon();
                    }, 300);
                }
            }

            setTimeout(moveMouseToIcon, 1000); // Start animation after 1 second
        }

        function clickIcon() {
            const mainpageIcon = document.getElementById('mainpage-icon');
            
            // Add click animation class
            mainpageIcon.classList.add('clicked');
            
            // Simulate click effect on cursor
            cursor.style.transform = 'scale(0.8)';
            
            setTimeout(() => {
                cursor.style.transform = 'scale(1)';
                mainpageIcon.classList.remove('clicked');
                
                // Show success message or open application effect
                showOpenEffect();
            }, 300);
        }

        function showOpenEffect() {
            // Create a simple "opening" effect
            const overlay = document.createElement('div');
            overlay.style.cssText = `
            `;
            overlay.textContent = '';
            
            const style = document.createElement('style');
            style.textContent = `
            `;
            document.head.appendChild(style);
            document.body.appendChild(overlay);
            
            setTimeout(() => {
                overlay.remove();
                style.remove();
                // Show the actual window
                openMainPageWindow();
            }, 1500);
        }

        function openMainPageWindow() {
            const windowOverlay = document.getElementById('window-overlay');
            const mainPageWindow = document.getElementById('mainpage-window');
            const iframe = document.getElementById('mainpage-iframe');
            
            windowOverlay.classList.add('show');
            setTimeout(() => {
                mainPageWindow.classList.add('show');

                // After a short delay to ensure iframe content is loaded,
                // try to add mousemove listener to the iframe's document.
                iframe.onload = () => { // Ensure iframe content is loaded
                    if (iframe.contentWindow && iframe.contentWindow.document) {
                        try {
                            iframe.contentWindow.document.body.style.cursor = 'none'; // Hide cursor inside iframe
                            iframe.contentWindow.document.addEventListener('mousemove', (e) => {
                                if (isCustomCursorInteractive) {
                                    // Adjust mouse coordinates relative to the parent window
                                    const iframeRect = iframe.getBoundingClientRect();
                                    cursorX = iframeRect.left + e.clientX;
                                    cursorY = iframeRect.top + e.clientY;
                                }
                            });
                            console.log('Iframe mousemove listener added successfully after load.');
                        } catch (e) {
                            console.warn('Could not add mousemove listener or hide cursor in iframe due to cross-origin policy:', e);
                        }
                    }
                };
                // If iframe is already loaded by the time we attach onload (e.g., cached), manually trigger
                if (iframe.contentWindow && iframe.contentWindow.document && iframe.contentWindow.document.readyState === 'complete') {
                    iframe.onload();
                }

                // Move mouse to maximize button and click it
                setTimeout(() => {
                    const maximizeButton = document.getElementById('maximize-button');
                    const buttonRect = maximizeButton.getBoundingClientRect();
                    const targetX = buttonRect.left + buttonRect.width / 2;
                    const targetY = buttonRect.top + buttonRect.height / 2;

                    let startX = cursorX; // Start from current cursor position
                    let startY = cursorY;

                    const moveDuration = 700; // 0.7 seconds to move to button
                    const moveStartTime = Date.now();

                    function moveMouseToMaximizeButton() {
                        const elapsed = Date.now() - moveStartTime;
                        const progress = Math.min(elapsed / moveDuration, 1);
                        const easeProgress = 1 - Math.pow(1 - progress, 3);

                        cursorX = startX + (targetX - startX) * easeProgress;
                        cursorY = startY + (targetY - startY) * easeProgress;

                        if (progress < 1) {
                            requestAnimationFrame(moveMouseToMaximizeButton);
                        } else {
                            // Mouse reached maximize button, now click it
                            setTimeout(() => {
                                clickMaximizeButton(maximizeButton);
                            }, 200); // Short delay before click
                        }
                    }
                    requestAnimationFrame(moveMouseToMaximizeButton);
                }, 1000); // Wait 1 second after window appears before moving mouse to maximize button
            }, 100);
        }

        function clickMaximizeButton(buttonElement) {
            buttonElement.classList.add('clicked'); // Add a visual click effect to the button
            cursor.style.transform = 'scale(0.8)'; // Simulate cursor click effect
            
            maximizeWindow(); // Trigger the maximize action

            setTimeout(() => {
                buttonElement.classList.remove('clicked');
                cursor.style.transform = 'scale(1)';
            }, 300); // Match this duration with the CSS transition for the click effect
        }


        function maximizeWindow() {
            const mainPageWindow = document.getElementById('mainpage-window');
            
            // If already maximized, or if we are already in the process, exit
            if (mainPageWindow.classList.contains('maximized') || mainPageWindow.classList.contains('is-maximizing')) {
                return;
            }

            // Store original position and size
            const rect = mainPageWindow.getBoundingClientRect();
            mainPageWindow.style.setProperty('--original-top', rect.top + 'px');
            mainPageWindow.style.setProperty('--original-left', rect.left + 'px');
            mainPageWindow.style.setProperty('--original-width', rect.width + 'px');
            mainPageWindow.style.setProperty('--original-height', rect.height + 'px');
            
            // Set the current position and size as explicit inline styles
            // This is crucial for the CSS transition to work from the current state
            mainPageWindow.style.top = rect.top + 'px';
            mainPageWindow.style.left = rect.left + 'px';
            mainPageWindow.style.width = rect.width + 'px';
            mainPageWindow.style.height = rect.height + 'px';
            mainPageWindow.style.borderRadius = rect.borderRadius; // Capture initial border radius

            // Force a reflow/repaint to ensure the browser registers the new inline styles
            // before the transition class is added.
            void mainPageWindow.offsetWidth; 

            // Add the 'is-maximizing' class to initiate the transition
            mainPageWindow.classList.add('is-maximizing');

            // After the transition completes, add the 'maximized' class for a persistent state
            // and remove the 'is-maximizing' class if you want to reuse it for un-maximize
            mainPageWindow.addEventListener('transitionend', function handler() {
                mainPageWindow.classList.add('maximized');
                mainPageWindow.classList.remove('is-maximizing'); // Clean up the transition class
                mainPageWindow.removeEventListener('transitionend', handler);

                // Optionally, remove inline style properties if the 'maximized' class covers them
                // This keeps the inline styles clean once maximized.
                mainPageWindow.style.top = '';
                mainPageWindow.style.left = '';
                mainPageWindow.style.width = '';
                mainPageWindow.style.height = '';
                mainPageWindow.style.borderRadius = '';

                // After maximizing, make the custom cursor follow the real mouse
                isCustomCursorInteractive = true;

                // IMPORTANT: When loading from an external src, direct DOM access to iframe.contentWindow.document
                // is subject to same-origin policy. This will only work if demo/mainpage.html is on the same origin.
                // If it's not, you'll need cross-origin communication (e.g., postMessage API).
                const iframe = document.getElementById('mainpage-iframe');
                if (iframe && iframe.contentWindow && iframe.contentWindow.document) {
                    try {
                        // This applies 'cursor: none' to the iframe's body from the parent.
                        // It will only work if same-origin.
                        iframe.contentWindow.document.body.style.cursor = 'none';

                        // Attach mousemove listener directly to iframe's document
                        iframe.contentWindow.document.addEventListener('mousemove', (e) => {
                            if (isCustomCursorInteractive) {
                                // e.clientX and e.clientY are relative to the iframe's viewport.
                                // We need to add the iframe's offset to get coordinates relative to the parent.
                                const iframeRect = iframe.getBoundingClientRect();
                                cursorX = iframeRect.left + e.clientX;
                                cursorY = iframeRect.top + e.clientY;
                            }
                        });
                        console.log('Iframe mousemove listener added successfully after maximize.');
                    } catch (e) {
                        console.warn('Could not add mousemove listener or hide cursor in iframe due to cross-origin policy:', e);
                        // Fallback: If cross-origin, custom cursor won't work inside iframe
                    }
                }

            }, { once: true }); // Ensure handler runs only once
        }

        function closeWindow() {
            mainPageWindow.style.borderRadius = '8px'; // Always reset to standard border-radius on close

            // Initiate the transition to the un-maximized/closed state
            // The 'show' class is responsible for the opacity and scale transition
            mainPageWindow.classList.remove('show');

            // Clean up the stored properties after the close animation completes
            setTimeout(() => {
                windowOverlay.classList.remove('show');
                mainPageWindow.style.removeProperty('--original-top');
                mainPageWindow.style.removeProperty('--original-left');
                mainPageWindow.style.removeProperty('--original-width');
                mainPageWindow.style.removeProperty('--original-height');
                // Ensure no residual inline styles interfere with next open
                mainPageWindow.style.top = '12%'; 
                mainPageWindow.style.left = '7.5%';
                mainPageWindow.style.width = '85%';
                mainPageWindow.style.height = '75%';
            }, 300); // Matches the window.show transition duration
        }

        // Start the animation sequence
        setTimeout(startMouseAnimation, 3000); // Wait for loading screen to finish

        // Add hover effects to desktop icons
        document.querySelectorAll('.desktop-icon').forEach(icon => {
            icon.addEventListener('mouseenter', () => {
                icon.style.transform = 'scale(1.05)';
            });
            
            icon.addEventListener('mouseleave', () => {
                icon.style.transform = 'scale(1)';
            });
        });

        // Add click handlers to taskbar items
        document.querySelectorAll('.taskbar-app, .start-button').forEach(item => {
            item.addEventListener('click', (e) => {
                e.target.style.background = 'rgba(0, 120, 212, 0.5)';
                setTimeout(() => {
                    e.target.style.background = '';
                }, 200);
            });
        });
    </script>
</body>
</html>
